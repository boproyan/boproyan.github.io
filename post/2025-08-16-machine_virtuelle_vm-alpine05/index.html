<!doctype html><head><link rel=stylesheet href=https://boproyan.github.io/css/main.min.6135c0700b2b81f4338a5c119b7a78b2bd20208c6f27ae64a19d0ef65cba906c.css></head><html lang=en><head><meta charset=utf-8><meta name=theme-color media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name=mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="black-translucent"><meta name=viewport content="width=device-width,user-scalable=no,initial-scale=1,shrink-to-fit=no,viewport-fit=cover"><meta property="og:url" content="https://boproyan.github.io/post/2025-08-16-machine_virtuelle_vm-alpine05/"><meta property="og:site_name" content="Chirpy"><meta property="og:title" content="cwwk KVM vm-alpine05"><meta property="og:description" content="Alpine Linux est utilisé pour héberger les applications IT-Tools - Stirling PDF - Monitoring Docker et Proxmox - Wallabag - Linkwarden
{:width=“300”}
Alpine Linux Création machine virtuelle Alpine de type KVM avec 2 Go de RAM, 1 cœur de processeur et 5 Go de disque dur.
Créer vm-alpine05 sur serveur cwwk Les dernières images Alpine Linux
Création d’une image virtuelle vm-alpine05 sous le serveur Lenovo rnmkcy.eu
On se connecte sur le serveur Lenovo en SSH, puis on exécute la commande suivante pour créer une machine virtuelle Alpine avec 2 Go de RAM, 1 cœur de processeur et 45 Go de disque dur"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:published_time" content="2025-08-16T00:00:00+00:00"><meta property="article:modified_time" content="2025-08-16T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="cwwk KVM vm-alpine05"><meta name=twitter:description content="Alpine Linux est utilisé pour héberger les applications IT-Tools - Stirling PDF - Monitoring Docker et Proxmox - Wallabag - Linkwarden
{:width=“300”}
Alpine Linux Création machine virtuelle Alpine de type KVM avec 2 Go de RAM, 1 cœur de processeur et 5 Go de disque dur.
Créer vm-alpine05 sur serveur cwwk Les dernières images Alpine Linux
Création d’une image virtuelle vm-alpine05 sous le serveur Lenovo rnmkcy.eu
On se connecte sur le serveur Lenovo en SSH, puis on exécute la commande suivante pour créer une machine virtuelle Alpine avec 2 Go de RAM, 1 cœur de processeur et 45 Go de disque dur"><meta itemprop=name content="cwwk KVM vm-alpine05"><meta itemprop=description content="Alpine Linux est utilisé pour héberger les applications IT-Tools - Stirling PDF - Monitoring Docker et Proxmox - Wallabag - Linkwarden
{:width=“300”}
Alpine Linux Création machine virtuelle Alpine de type KVM avec 2 Go de RAM, 1 cœur de processeur et 5 Go de disque dur.
Créer vm-alpine05 sur serveur cwwk Les dernières images Alpine Linux
Création d’une image virtuelle vm-alpine05 sous le serveur Lenovo rnmkcy.eu
On se connecte sur le serveur Lenovo en SSH, puis on exécute la commande suivante pour créer une machine virtuelle Alpine avec 2 Go de RAM, 1 cœur de processeur et 45 Go de disque dur"><meta itemprop=datePublished content="2025-08-16T00:00:00+00:00"><meta itemprop=dateModified content="2025-08-16T00:00:00+00:00"><meta itemprop=wordCount content="2226"><meta itemprop=keywords content="Virtuel"><title>cwwk KVM vm-alpine05 |
Chirpy</title><link rel=apple-touch-icon sizes=180x180 href=/img/favicons/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/img/favicons/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/img/favicons/favicon-16x16.png><link rel="shortcut icon" href=/img/favicons/favicon.ico><meta name=apple-mobile-web-app-title content="Chirpy"><meta name=application-name content="Chirpy"><meta name=msapplication-TileColor content="#da532c"><meta name=msapplication-config content="/img/favicons/browserconfig.xml"><meta name=theme-color content="#ffffff"><link rel=preconnect href=https://fonts.googleapis.com><link rel=dns-prefetch href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=https://fonts.gstatic.com><link rel=preconnect href=https://cdn.jsdelivr.net><link rel=dns-prefetch href=https://cdn.jsdelivr.net><link rel=stylesheet href=https://boproyan.github.io/css/main.min.6135c0700b2b81f4338a5c119b7a78b2bd20208c6f27ae64a19d0ef65cba906c.css><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&amp;family=Source+Sans+Pro:wght@400;600;700;900&amp;display=swap"><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.css><link rel=stylesheet href=/><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css><script src=/js/modules/theme.js></script><script src=https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/js/glightbox.min.js></script><script src=https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js></script><script src=https://cdn.jsdelivr.net/npm/dayjs@1.11.13/dayjs.min.js></script><script src=https://cdn.jsdelivr.net/npm/dayjs@1.11.13/locale/en.js></script><script src=https://cdn.jsdelivr.net/npm/dayjs@1.11.13/plugin/relativeTime.js></script><script src=https://cdn.jsdelivr.net/npm/dayjs@1.11.13/plugin/localizedFormat.js></script><script src=https://cdn.jsdelivr.net/npm/tocbot@4.32.2/dist/tocbot.min.js></script><script defer src=/js/post.js></script></head><body><aside aria-label=Sidebar id=sidebar class="d-flex flex-column align-items-end"><header class=profile-wrapper><a href=/ id=avatar class=rounded-circle><img src=/img/commons/avatar.jpg width=112 height=112 alt=avatar onerror='this.style.display="none"'></a>
<a class="site-title d-block" href=/>Chirpy</a><p class="site-subtitle fst-italic mb-0">A text-focused blog theme</p></header><nav class="flex-column flex-grow-1 w-100 ps-0"><ul class=nav><li class=nav-item><a href=/ class=nav-link><i class="fa-fw fas fa-house"></i>
<span>HOME</span></a></li><li class=nav-item><a href=/categories/ class=nav-link><i class="fa-fw fas fa-stream"></i>
<span>CATEGORIES</span></a></li><li class=nav-item><a href=/tags/ class=nav-link><i class="fa-fw fas fa-tags"></i>
<span>TAGS</span></a></li><li class=nav-item><a href=/archives/ class=nav-link><i class="fa-fw fas fa-archive"></i>
<span>ARCHIVES</span></a></li><li class=nav-item><a href=/about/ class=nav-link><i class="fa-fw fas fa-info-circle"></i>
<span>ABOUT</span></a></li><li class="nav-item mt-4"><a class="nav-link no-hover"><i class="fa-fw fas fa-language"></i><div class=lang-dropdown><select class=lang-select onchange="location=this.value"><option value=https://boproyan.github.io/zh-cn/>中文</option><option value=https://boproyan.github.io/en/ selected>English</option></select></div></a></li></ul></nav><div class="sidebar-bottom d-flex flex-wrap align-items-center w-100"><button type=button class="btn btn-link nav-link" aria-label="Switch Mode" id=mode-toggle>
<i class="fas fa-adjust"></i>
</button>
<span class=icon-border></span>
<a href=https://github.com/yourusername aria-label=github target=_blank rel="noopener noreferrer"><i class="fab fa-github"></i>
</a><a href=https://twitter.com/yourhandle aria-label=twitter target=_blank rel="noopener noreferrer"><i class="fab fa-twitter"></i>
</a><a href=mailto:your.email@example.com aria-label=email target=_blank rel="noopener noreferrer"><i class="fas fa-envelope"></i>
</a><a href=https://boproyan.github.io/index.xml aria-label=rss><i class="fas fa-rss"></i></a></div></aside><div id=main-wrapper class="d-flex justify-content-center"><div class="container d-flex flex-column px-xxl-5"><header id=topbar-wrapper class=flex-shrink-0 aria-label="Top Bar"><div id=topbar class="d-flex align-items-center justify-content-between px-lg-3 h-100"><nav id=breadcrumb aria-label=Breadcrumb><span><a href=/>Home</a>
</span><span>cwwk KVM vm-alpine05</span></nav><button type=button id=sidebar-trigger class="btn btn-link" aria-label=Sidebar>
<i class="fas fa-bars fa-fw"></i></button><div id=topbar-title>cwwk KVM vm-alpine05</div><button type=button id=search-trigger class="btn btn-link" aria-label=Search>
<i class="fas fa-search fa-fw"></i>
</button>
<search id=search class="align-items-center ms-3 ms-lg-0"><i class="fas fa-search fa-fw"></i>
<input class=form-control id=search-input type=search aria-label=search autocomplete=off placeholder=Search...>
</search><button type=button class="btn btn-link text-decoration-none" id=search-cancel>Cancel</button></div></header><div class="row flex-grow-1"><main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4"><article class=px-1 data-toc=true><header><h1 data-toc-skip>cwwk KVM vm-alpine05</h1><div class="post-meta text-muted"><span>Posted
<time data-ts=1755302400 data-df=ll data-bs-toggle=tooltip data-bs-placement=bottom>%b %e, %Y</time></span><div class="d-flex justify-content-between"><span>By
<em><a href=https://github.com/geekifan>Yifan</a></em></span><div><span class=readtime data-bs-toggle=tooltip data-bs-placement=bottom title="4274 words"><em>23 min</em> read</span></div></div></div></header><div id=toc-bar class="d-flex align-items-center justify-content-between invisible"><span class="label text-truncate">cwwk KVM vm-alpine05</span>
<button type=button class="toc-trigger btn me-1">
<i class="fa-solid fa-list-ul fa-fw"></i></button></div><button id=toc-solo-trigger type=button class="toc-trigger btn btn-outline-secondary btn-sm">
<span class="label ps-2 pe-1">Contents</span>
<i class="fa-solid fa-angle-right fa-fw"></i>
</button>
<dialog id=toc-popup class=p-0><div class="header d-flex flex-row align-items-center justify-content-between"><div class="label text-truncate py-2 ms-4">cwwk KVM vm-alpine05</div><button id=toc-popup-close type=button class="btn mx-1 my-1 opacity-75">
<i class="fas fa-close"></i></button></div><div id=toc-popup-content class="px-4 py-3 pb-4"><nav id=TableOfContents><ul><li><a href=#alpine-linux>Alpine Linux</a><ul><li><a href=#créer-vm-alpine05-sur-serveur-cwwk>Créer vm-alpine05 sur serveur cwwk</a></li><li><a href=#configurer-vm-alpine>Configurer vm-alpine</a></li><li><a href=#explications-sur-la-procédure>Explications sur la procédure</a></li><li><a href=#connexion-vm-alpine-via-ssh>Connexion vm-alpine via SSH</a></li><li><a href=#modifier-hosts-hostname-et-resolvconf>Modifier hosts, hostname et resolv.conf</a></li><li><a href=#réseau-ipv4-statique>Réseau IPV4 statique</a></li><li><a href=#openssh-avec-clés>OpenSSH avec clés</a></li><li><a href=#sudo>sudo</a></li><li><a href=#alpine-linux---mise-à-jour-automatique>Alpine Linux - Mise à jour automatique</a></li><li><a href=#nfs>NFS</a></li><li><a href=#docker-et-docker-compose>docker et docker-compose</a></li><li><a href=#watchtower---mise-à-jour-auto>Watchtower - Mise à jour auto</a></li></ul></li><li><a href=#cadvisor-prometheus--grafana--influxdb>cAdvisor+ Prometheus + Grafana + InfluxDB</a></li><li><a href=#linkwarden>Linkwarden</a><ul><li><a href=#exigences>Exigences</a></li><li><a href=#installation>Installation</a></li><li><a href=#cwwk---linkwarden>cwwk - linkwarden</a></li></ul></li></ul></nav></div></dialog><div class=content><p><em>Alpine Linux est utilisé pour héberger les applications IT-Tools - Stirling PDF - Monitoring Docker et Proxmox - Wallabag - Linkwarden</em></p><p><a href=/post/2025-08-16-machine_virtuelle_vm-alpine05/alpine-linux-logo.png class="popup img-link"><img src=/post/2025-08-16-machine_virtuelle_vm-alpine05/alpine-linux-logo.png alt>
</a>{:width=&ldquo;300&rdquo;}</p><h2 id=alpine-linux id=alpine-linux><span class=me-2>Alpine Linux</span>
<a href=#alpine-linux class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><em>Création machine virtuelle Alpine de type KVM avec 2 Go de RAM, 1 cœur de processeur et 5 Go de disque dur.</em></p><h3 id=créer-vm-alpine05-sur-serveur-cwwk id=créer-vm-alpine05-sur-serveur-cwwk><span class=me-2>Créer vm-alpine05 sur serveur cwwk</span>
<a href=#cr%c3%a9er-vm-alpine05-sur-serveur-cwwk class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href=https://alpinelinux.org/downloads/>Les dernières images Alpine Linux</a></p><p>Création d&rsquo;une image virtuelle <strong>vm-alpine05</strong> sous le serveur Lenovo rnmkcy.eu<br>On se connecte sur le serveur Lenovo en SSH, puis on exécute la commande suivante pour créer une machine virtuelle Alpine avec 2 Go de RAM, 1 cœur de processeur et 45 Go de disque dur</p><div class=code-block><div class=code-header><span data-label-text=Shell><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo virt-install <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--osinfo alpinelinux3.17 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--name vm-alpine05 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--memory <span class=m>4096</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--vcpus <span class=m>1</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--cpu host <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--hvm <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--disk <span class=nv>path</span><span class=o>=</span>/srv/kvm/libvirt/images/vm-alpine05.qcow2,format<span class=o>=</span>qcow2,size<span class=o>=</span><span class=m>45</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--cdrom /home/yick/FreeUSB2To/iso/alpine-standard-3.22.1-x86_64.iso <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--network <span class=nv>bridge</span><span class=o>=</span>br0 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>--graphics vnc,port<span class=o>=</span><span class=m>5904</span>  </span></span></code></pre></td></tr></table></div></div></div><p>Note: KVM ne connait que <code>alpinelinux3.17</code> (<code>sudo virt-install --osinfo list |grep alpine</code>)</p><p>Après exécution dans un terminal de la commande ci dessus, on arrive sur <em>En attente de fin d&rsquo;installation</em></p><p>ARRETER la VM pour changer le port vnc (5903)<br><a href=/post/2025-08-16-machine_virtuelle_vm-alpine05/vnc-port.png class="popup img-link"><img src=/post/2025-08-16-machine_virtuelle_vm-alpine05/vnc-port.png alt>
</a>{:width=&ldquo;400&rdquo; .normal}<br>Puis redémarrer la VM</p><h3 id=configurer-vm-alpine id=configurer-vm-alpine><span class=me-2>Configurer vm-alpine</span>
<a href=#configurer-vm-alpine class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><code>ATTENTION: Désactiver "Affichage VNC" des autres machines ou changer le port</code>{: .prompt-warning }</p><p>Le serveur Lenovo n&rsquo;a pas d&rsquo;affichage, il faut créer un tunnel ssh depuis un terminal d&rsquo;un poste client</p><pre><code>ssh -L 5900:127.0.0.1:5904 yick@192.168.0.205 -p 55205 -i /home/yann/.ssh/yick-ed25519
</code></pre><p>Puis lancer de ce même poste un client VNC<br><a href=/post/2025-08-16-machine_virtuelle_vm-alpine05/alpine-linux02.png class="popup img-link"><img src=/post/2025-08-16-machine_virtuelle_vm-alpine05/alpine-linux02.png alt>
</a>{:width=&ldquo;300&rdquo;}<br>la console s&rsquo;affiche<br><a href=/post/2025-08-16-machine_virtuelle_vm-alpine05/alpine-linux03.png class="popup img-link"><img src=/post/2025-08-16-machine_virtuelle_vm-alpine05/alpine-linux03.png alt></a></p><p>Une fois l&rsquo;image ISO lancée, on arrive à un invite de connexion.<br>Indiquez <code>root</code> comme nom d&rsquo;utilisateur, aucun mot de passe ne vous sera demandé à cette étape.</p><p>Le système est utilisable, mais on veut l&rsquo;installer, ce qui passe par la commande suivante (clavier qwerty)</p><div class=code-block><div class=code-header><span data-label-text><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>setup-alpine # saisir setup)qlpine</span></span></code></pre></td></tr></table></div></div></div><p>Une suite de questions :<br><a href=/post/2025-08-16-machine_virtuelle_vm-alpine05/alpine-linux04.png class="popup img-link"><img src=/post/2025-08-16-machine_virtuelle_vm-alpine05/alpine-linux04.png alt></a><br>mot de passe root (rtyuiop)<br><a href=/post/2025-08-16-machine_virtuelle_vm-alpine05/alpine-linux05.png class="popup img-link"><img src=/post/2025-08-16-machine_virtuelle_vm-alpine05/alpine-linux05.png alt></a><br>APK mirror&mldr;<br><a href=/post/2025-08-16-machine_virtuelle_vm-alpine05/alpine-linux05a.png class="popup img-link"><img src=/post/2025-08-16-machine_virtuelle_vm-alpine05/alpine-linux05a.png alt></a></p><p>Utilisateur alpi/alpi49 et suite&mldr;<br><a href=/post/2025-08-16-machine_virtuelle_vm-alpine05/alpine-linux06.png class="popup img-link"><img src=/post/2025-08-16-machine_virtuelle_vm-alpine05/alpine-linux06.png alt></a></p><p>Relever l&rsquo;adresse ip allouée : <code>ip a</code> &ndash;> 192.168.10.195<br>Puis redémarrer : <code>reboot</code><br>La fenêtre vnc se ferme</p><p>On n&rsquo;a plus besoin de VNC, en mode graphique<br><a href=/post/2025-08-16-machine_virtuelle_vm-alpine05/alpine-linux06a.png class="popup img-link"><img src=/post/2025-08-16-machine_virtuelle_vm-alpine05/alpine-linux06a.png alt>
</a>{:width=&ldquo;400&rdquo;}<br><a href=/post/2025-08-16-machine_virtuelle_vm-alpine05/alpine-linux06b.png class="popup img-link"><img src=/post/2025-08-16-machine_virtuelle_vm-alpine05/alpine-linux06b.png alt>
</a>{:width=&ldquo;400&rdquo;}<br><a href=/post/2025-08-16-machine_virtuelle_vm-alpine05/alpine-linux06c.png class="popup img-link"><img src=/post/2025-08-16-machine_virtuelle_vm-alpine05/alpine-linux06c.png alt>
</a>{:width=&ldquo;400&rdquo;}<br>Eteindre puis redémarrer la machine virtuelle</p><h3 id=explications-sur-la-procédure id=explications-sur-la-procédure><span class=me-2>Explications sur la procédure</span>
<a href=#explications-sur-la-proc%c3%a9dure class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><em>Normalement, vous n&rsquo;avez rien à faire, les paramètres par défaut doivent convenir. Mais si vous le désirez, vous pouvez les modifier pour utiliser une interface particulière, une IP fixe, un serveur proxy, etc.<br>Une soixantaine de serveurs mirroir vous seront proposés pour télécharger les paquets. Choisissez un numéro dans la liste ou demandez au système de les tester et de sélectionner le plus rapide. Vous pouvez aussi modifier le fichier des sources. Il vous faudra ensuite choisir votre serveur SSH : OpenSSH, Dropbear ou aucun.</em></p><p>On termine par la méthode d&rsquo;installation. Il en existe quatre :</p><ul><li>none : le système et ses données sont placés en RAM et seront perdus après le redémarrage</li><li>sys : le système et ses données sont placés sur un HDD/SSD</li><li>data : le système est placé en RAM, les données sur un HDD/SSD</li><li>lvm : utilisation de Logical Volume Manager, les deux choix précédents seront proposés (lvmsys, lvmdata)</li></ul><p>Si vous stockez le système en mémoire, il faudra trouver un moyen de sauvegarder la configuration. Vous pourrez le faire uniquement depuis un lecteur de disquettes (!) ou une clé USB. Une fois le système installé, vous pourrez l&rsquo;utiliser directement s&rsquo;il est placé en mémoire ou redémarrer si vous avez opté pour un stockage classique.</p><p>Il n&rsquo;est pas conseillé d&rsquo;utiliser directement le compte root pour les actions du quotidien.<br>Si utilisateur non créé dans la procédure d&rsquo;installation, le créer avec son propre espace dans /home/</p><pre><code>adduser alpi
</code></pre><p>Vous pouvez utiliser l&rsquo;utilisateur pour vous connecter via SSH (impossible avec le compte root)</p><h3 id=connexion-vm-alpine-via-ssh id=connexion-vm-alpine-via-ssh><span class=me-2>Connexion vm-alpine via SSH</span>
<a href=#connexion-vm-alpine-via-ssh class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Sur un poste linux du réseau</p><pre><code>ssh alpi@192.168.10.195
</code></pre><p>Une fois connecté ,vous pouvez accéder au &ldquo;root&rdquo; de manière classique avec la commande :</p><pre><code>su -
</code></pre><p>Mise à jour</p><div class=code-block><div class=code-header><span data-label-text=Shell><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>apk update
</span></span><span class=line><span class=cl>apk upgrade 
</span></span><span class=line><span class=cl><span class=c1># Vous pouvez fusionner les deux lignes avec </span>
</span></span><span class=line><span class=cl>apk -U upgrade</span></span></code></pre></td></tr></table></div></div></div><p>Editeur nano (Vous pouvez aussi opter pour vi qui est nativement présent sur le système)</p><pre><code>apk add nano
</code></pre><h3 id=modifier-hosts-hostname-et-resolvconf id=modifier-hosts-hostname-et-resolvconf><span class=me-2>Modifier hosts, hostname et resolv.conf</span>
<a href=#modifier-hosts-hostname-et-resolvconf class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Fichier /etc/hosts</p><div class=code-block><div class=code-header><span data-label-text><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>127.0.0.1	vm-alpine05 localhost localhost.localdomain localhost
</span></span><span class=line><span class=cl>::1		localhost localhost.localdomain</span></span></code></pre></td></tr></table></div></div></div><p>Fichier /etc/hostname</p><div class=code-block><div class=code-header><span data-label-text><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>vm-alpine05</span></span></code></pre></td></tr></table></div></div></div><h3 id=réseau-ipv4-statique id=réseau-ipv4-statique><span class=me-2>Réseau IPV4 statique</span>
<a href=#r%c3%a9seau-ipv4-statique class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href=https://www.cyberciti.biz/faq/how-to-configure-static-ip-address-on-alpine-linux/>How to configure static IP address on Alpine Linux</a></p><p>Le fichier de configuration <code>/etc/network/interfaces</code></p><pre><code>/etc/network/interfaces
</code></pre><div class=code-block><div class=code-header><span data-label-text=Shell><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>auto lo
</span></span><span class=line><span class=cl>iface lo inet loopback
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>auto eth0
</span></span><span class=line><span class=cl>iface eth0 inet static
</span></span><span class=line><span class=cl>  address 192.168.10.215/24
</span></span><span class=line><span class=cl>  gateway 192.168.10.1</span></span></code></pre></td></tr></table></div></div></div><p>Fichier de résolution dns</p><pre><code>/etc/resolv.conf
</code></pre><div class=code-block><div class=code-header><span data-label-text><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>nameserver 192.168.0.205
</span></span><span class=line><span class=cl>nameserver 192.168.10.1</span></span></code></pre></td></tr></table></div></div></div><p>Les modifications apportées à /etc/network/interfaces peuvent être activées en exécutant</p><div class=code-block><div class=code-header><span data-label-text=Shell><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>service networking restart </span></span></code></pre></td></tr></table></div></div></div><p>Un redémarrage de la macine est préférable</p><div class=code-block><div class=code-header><span data-label-text=Shell><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>reboot</span></span></code></pre></td></tr></table></div></div></div><p><code>ATTENTION: Déconnexion SSH car changement adresse IP</code>{: .prompt-warning }</p><p>Connexion SSH avec IP 192.168.10.215</p><pre><code>ssh alpi@192.168.10.215
</code></pre><p>Message à la connexion SSH, <code>/etc/motd</code></p><div class=code-block><div class=code-header><span data-label-text><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>    _     _         _                _      _                           
</span></span><span class=line><span class=cl>   / \   | | _ __  (_) _ __    ___  | |    (_) _ __   _   _ __  __      
</span></span><span class=line><span class=cl>  / _ \  | || &#39;_ \ | || &#39;_ \  / _ \ | |    | || &#39;_ \ | | | |\ \/ /      
</span></span><span class=line><span class=cl> / ___ \ | || |_) || || | | ||  __/ | |___ | || | | || |_| | &gt;  &lt;       
</span></span><span class=line><span class=cl>/_/   \_\|_|| .__/ |_||_| |_| \___| |_____||_||_| |_| \__,_|/_/\_\      
</span></span><span class=line><span class=cl>            |_|                  _         _                ___   ____  
</span></span><span class=line><span class=cl>__   __ _ __ ___           __ _ | | _ __  (_) _ __    ___  / _ \ | ___| 
</span></span><span class=line><span class=cl>\ \ / /| &#39;_ ` _ \  _____  / _` || || &#39;_ \ | || &#39;_ \  / _ \| | | ||___ \ 
</span></span><span class=line><span class=cl> \ V / | | | | | ||_____|| (_| || || |_) || || | | ||  __/| |_| | ___) |
</span></span><span class=line><span class=cl>  \_/  |_| |_| |_|        \__,_||_|| .__/ |_||_| |_| \___| \___/ |____/ 
</span></span><span class=line><span class=cl> _   ___  ____      _   __     ___ |_| _   ___     ____   _  ____       
</span></span><span class=line><span class=cl>/ | / _ \|___ \    / | / /_   ( _ )   / | / _ \   |___ \ / || ___|      
</span></span><span class=line><span class=cl>| || (_) | __) |   | || &#39;_ \  / _ \   | || | | |    __) || ||___ \      
</span></span><span class=line><span class=cl>| | \__, |/ __/  _ | || (_) || (_) |_ | || |_| |_  / __/ | | ___) |     
</span></span><span class=line><span class=cl>|_|   /_/|_____|(_)|_| \___/  \___/(_)|_| \___/(_)|_____||_||____/      </span></span></code></pre></td></tr></table></div></div></div><h3 id=openssh-avec-clés id=openssh-avec-clés><span class=me-2>OpenSSH avec clés</span>
<a href=#openssh-avec-cl%c3%a9s class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><em>Connexion ssh sur un autre port avec un jeu de clés</em></p><p>Générer une paire de clé sur l&rsquo;ordinateur de bureau PC1<br>Générer une paire de clé curve25519-sha256 (ECDH avec Curve25519 et SHA2) pour une liaison SSH avec la machine virtuelle vm-alpine05</p><pre><code>ssh-keygen -t ed25519 -o -a 100 -f ~/.ssh/vm-alpine05
chmod 600 ~/.ssh/vm-alpine05
</code></pre><p>Copier la clé publique <code>cat ~/.ssh/vm-alpine05.pub</code> dans le presse-papier</p><div class=code-block><div class=code-header><span data-label-text><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIIXzOxqt9LMDqTrbHZ05+ZBRLdQkRUpoBG0fTPsjjq10 yann@pc1</span></span></code></pre></td></tr></table></div></div></div><p>On se connecte sur la machine virtuelle alpine linux &ldquo;vm-alpine05&rdquo;</p><p>Créer le répertoire et ouvrir nouveau fichier</p><div class=code-block><div class=code-header><span data-label-text=Shell><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>mkdir -p <span class=nv>$HOME</span>/.ssh/
</span></span><span class=line><span class=cl>nano <span class=nv>$HOME</span>/.ssh/authorized_keys</span></span></code></pre></td></tr></table></div></div></div><p>Coller le contenu du presse-papier , sauver le fichier et sortir</p><p>Modifier les droits</p><div class=code-block><div class=code-header><span data-label-text=Shell><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>chmod <span class=m>600</span> <span class=nv>$HOME</span>/.ssh/authorized_keys</span></span></code></pre></td></tr></table></div></div></div><p>Passer en mode su</p><div class=code-block><div class=code-header><span data-label-text=Shell><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>su -</span></span></code></pre></td></tr></table></div></div></div><p>Modifier la configuration serveur SSH</p><div class=code-block><div class=code-header><span data-label-text=Shell><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>nano /etc/ssh/sshd_config</span></span></code></pre></td></tr></table></div></div></div><p>Modifier</p><div class=code-block><div class=code-header><span data-label-text><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>Port = 55215
</span></span><span class=line><span class=cl>PasswordAuthentication no</span></span></code></pre></td></tr></table></div></div></div><p>Relancer le serveur</p><pre><code>service sshd restart
</code></pre><p>Test connexion</p><div class=code-block><div class=code-header><span data-label-text=Shell><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh alpi@192.168.10.215 -p <span class=m>55215</span> -i /home/yann/.ssh/vm-alpine05</span></span></code></pre></td></tr></table></div></div></div><h3 id=sudo id=sudo><span class=me-2>sudo</span>
<a href=#sudo class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Passer en root</p><pre><code>su -
</code></pre><p><strong>Ajout dépôt communauté</strong><br>Editer la configuration des dépôts</p><pre><code>nano /etc/apk/repositories
</code></pre><p>Trouvez maintenant la ligne qui se termine dans <strong>/community</strong><br>Ensuite, retirez le <code>#</code> au début de la ligne.<br>Le fichier résultant devrait ressembler à ceci</p><div class=code-block><div class=code-header><span data-label-text><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>#/media/cdrom/apks
</span></span><span class=line><span class=cl>http://mirrors.ircam.fr/pub/alpine/v3.20/main
</span></span><span class=line><span class=cl>http://mirrors.ircam.fr/pub/alpine/v3.20/community</span></span></code></pre></td></tr></table></div></div></div><p>Installer sudo</p><div class=code-block><div class=code-header><span data-label-text=Shell><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>apk update
</span></span><span class=line><span class=cl>apk add sudo</span></span></code></pre></td></tr></table></div></div></div><p>Ajouter un utilisateur avec les privlèges root</p><div class=code-block><div class=code-header><span data-label-text=Shell><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;alpi     ALL=(ALL) NOPASSWD: ALL&#34;</span> &gt;&gt; /etc/sudoers.d/20-alpi</span></span></code></pre></td></tr></table></div></div></div><h3 id=alpine-linux---mise-à-jour-automatique id=alpine-linux---mise-à-jour-automatique><span class=me-2>Alpine Linux - Mise à jour automatique</span>
<a href=#alpine-linux---mise-%c3%a0-jour-automatique class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Installer curl</p><pre><code>sudo apk add curl
</code></pre><p>Pour chaque nouveau serveur Alpine Linux, créer en mode su un script shell nommé <code>apk-autoupgrade</code> dans le dossier <code>/etc/periodic/daily/</code> avec les permissions suivantes : 700</p><div class=code-block><div class=code-header><span data-label-text=Shell><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=nb>echo</span> -e <span class=s2>&#34;#!/bin/sh\napk upgrade --update | sed \&#34;s/^/[\`date\`] /\&#34; &gt;&gt; /var/log/apk-autoupgrade.log&#34;</span> &gt; /etc/periodic/daily/apk-autoupgrade <span class=o>&amp;&amp;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>	chmod <span class=m>700</span> /etc/periodic/daily/apk-autoupgrade</span></span></code></pre></td></tr></table></div></div></div><p>Si les tâches cron ne sont pas activées</p><div class=code-block><div class=code-header><span data-label-text=Shell><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>rc-service crond start
</span></span><span class=line><span class=cl>rc-update add crond</span></span></code></pre></td></tr></table></div></div></div><p>Le script exécute la commande <code>apk upgrade --update</code> une fois par jour, apk par défaut ne demande jamais l’intervention de l’utilisateur.</p><p>Additif pour notification ntfy</p><pre><code>nano /etc/periodic/daily/apk-autoupgrade
</code></pre><p>Ajouter ce qui suit en fin de fichier</p><div class=code-block><div class=code-header><span data-label-text><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>curl \
</span></span><span class=line><span class=cl>-H &#34;X-Email: ntfy@cinay.eu&#34; \
</span></span><span class=line><span class=cl>-H &#34;Title: 💻 Alpine Linux vm-alpine05 : Fin exécution script &#39;apk-autoupgrade&#39;&#34; \
</span></span><span class=line><span class=cl>-H &#34;Authorization: Bearer tk_xxxxxxxxxxxxxxxxxxxxxxxxxxxx&#34; \
</span></span><span class=line><span class=cl>-H prio:low \
</span></span><span class=line><span class=cl>-d &#34;vm-alpine05 192.168.10.215 
</span></span><span class=line><span class=cl>✔️ Fin exécution script /etc/periodic/daily/apk-autoupgrade&#34; \
</span></span><span class=line><span class=cl>https://noti.rnmkcy.eu/yan_infos</span></span></code></pre></td></tr></table></div></div></div><h3 id=nfs id=nfs><span class=me-2>NFS</span>
<a href=#nfs class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Cette page documente la configuration du système de fichiers réseau (NFS) du côté du serveur et du client, y compris les autofs et l&rsquo;authentification Kerberos.
Installation</p><p>Installez le paquet suivant pour le service client et serveur NFS.</p><div class=code-block><div class=code-header><span data-label-text=Shell><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo apk add nfs-utils</span></span></code></pre></td></tr></table></div></div></div><p>Client NFS</p><p>Créer dossier de montage</p><div class=code-block><div class=code-header><span data-label-text=Shell><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>mkdir ~/sharenfs</span></span></code></pre></td></tr></table></div></div></div><p>Pour monter automatiquement les actions NFS, une entrée doit être faite à <code>/etc/fstab</code> comme suit:</p><div class=code-block><div class=code-header><span data-label-text=Shell><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>192.168.0.205:/sharenfs /home/alpi/sharenfs nfs4 rw,_netdev <span class=m>0</span> <span class=m>0</span></span></span></code></pre></td></tr></table></div></div></div><p>Pour monter nfs share depuis le fichier /etc/fstab au démarrage du système :</p><div class=code-block><div class=code-header><span data-label-text=Shell><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo rc-update add nfsmount</span></span></code></pre></td></tr></table></div></div></div><p>Pour monter les actions de nfs depuis le fichier /etc/fstab :</p><div class=code-block><div class=code-header><span data-label-text=Shell><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo rc-service nfsmount start</span></span></code></pre></td></tr></table></div></div></div><p>Vous pouvez vérifier vos services de démarrage :</p><div class=code-block><div class=code-header><span data-label-text=Shell><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo rc-status</span></span></code></pre></td></tr></table></div></div></div><p>Conseil : netmount est un service général pour tous les systèmes de fichiers basés sur le réseau, tandis que nfsmount est spécialement conçu pour NFS.</p><p>Pour utiliser netmount, voici les commandes équivalentes :</p><div class=code-block><div class=code-header><span data-label-text><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl># rc-service netmount démarrage
</span></span><span class=line><span class=cl># rc-update add netmount</span></span></code></pre></td></tr></table></div></div></div><blockquote><p>En cas d&rsquo;erreur au montage NFS , <code>REDEMARRER LA MACHINE</code>.
{: .prompt-warning }</p></blockquote><h3 id=docker-et-docker-compose id=docker-et-docker-compose><span class=me-2>docker et docker-compose</span>
<a href=#docker-et-docker-compose class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><a href=/post/2025-08-16-machine_virtuelle_vm-alpine05/docker-logo-a.png class="popup img-link"><img src=/post/2025-08-16-machine_virtuelle_vm-alpine05/docker-logo-a.png alt></a><p><a href=https://geekscircuit.com/install-docker-docker-compose-on-alpine-linux/>Install docker & docker-compose on Alpine Linux</a></p><p>Passer en root</p><pre><code>su -
</code></pre><p>Editer la configuration des dépôts <code>/etc/apk/repositories</code>
Trouvez maintenant la ligne qui se termine dans /community Ensuite, retirez le # au début de la ligne.</p><p>Installer docker et docker-compose</p><div class=code-block><div class=code-header><span data-label-text=Shell><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>apk update
</span></span><span class=line><span class=cl>apk add docker docker-compose</span></span></code></pre></td></tr></table></div></div></div><p>Activer autostart sur boot en utilisant</p><div class=code-block><div class=code-header><span data-label-text=Shell><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>rc-update add docker default</span></span></code></pre></td></tr></table></div></div></div><p>puis vous pouvez lancer le service docker en utilisant la commande</p><div class=code-block><div class=code-header><span data-label-text=Shell><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>/etc/init.d/docker start
</span></span><span class=line><span class=cl><span class=c1># ou</span>
</span></span><span class=line><span class=cl>service docker start</span></span></code></pre></td></tr></table></div></div></div><h3 id=watchtower---mise-à-jour-auto id=watchtower---mise-à-jour-auto><span class=me-2>Watchtower - Mise à jour auto</span>
<a href=#watchtower---mise-%c3%a0-jour-auto class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href=https://github.com/v2tec/watchtower>Watchtower</a> est un outil open-source permettant d&rsquo;automatiser les mises à jour. Il se présente sous la forme d&rsquo;une image Docker à lancer très simplement :</p><div class=code-block><div class=code-header><span data-label-text=Shell><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl><span class=c1># Exemple Syntaxe mode utilisateur (non root)</span>
</span></span><span class=line><span class=cl>docker run --detach <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --name watchtower <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    --volume /var/run/docker.sock:/var/run/docker.sock <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    containrrr/watchtower</span></span></code></pre></td></tr></table></div></div></div><p>Le paramètre <code>--volume</code> est obligatoire pour que Watchtower puisse communiquer avec le démon Docker sur le système hôte.</p><p>Il est possible de lui préciser quand faire les mises à jour, histoire d&rsquo;éviter une coupure de service (même mineure) en pleine heure de pointe. Le paramètre <code>--schedule</code> prend comme valeur une expression crontab. Sinon, le paramètre <code>--interval</code> peut-être utilisé pour définir le nombre de secondes entre chaque vérification.</p><p>À noter également l&rsquo;option <code>--cleanup</code> qui permet de supprimer les anciennes images afin de ne pas surcharger l&rsquo;espace disque de l&rsquo;hôte.</p><p>nous devons d&rsquo;abord lancer le conteneur Watchtower lui-même en exécutant une commande Docker :</p><div class=code-block><div class=code-header><span data-label-text=Shell><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>docker run <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --name watchtower <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --volume /var/run/docker.sock:/var/run/docker.sock <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --detach <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  containrrr/watchtower <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --schedule <span class=s2>&#34;0 0 4 * * *&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  --cleanup</span></span></code></pre></td></tr></table></div></div></div><p>Ainsi, nous exécutons Watchtower en mode détaché, ce qui lui donne accès au <strong>socket Docker</strong>, qui est nécessaire à Watchtower pour surveiller et mettre à jour les conteneurs.<br>Notre sortie montre l&rsquo;identifiant unique du conteneur Watchtower qui s&rsquo;exécute maintenant en arrière-plan.</p><div class=code-block><div class=code-header><span data-label-text=Text><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Status: Downloaded newer image for containrrr/watchtower:latest
</span></span><span class=line><span class=cl>66ded140d58a02a2a5132b556ee0ca1c42c267a7b75e273e7e6f8fe4992ab420</span></span></code></pre></td></tr></table></div></div></div><p>Plus besoin donc de se soucier de mettre à jour ses containers, Watchtower le fait tout seul, et ça fonctionne parfaitement !</p><pre><code>docker logs watchtower
</code></pre><div class=code-block><div class=code-header><span data-label-text><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>time=&#34;2025-08-16T13:58:50Z&#34; level=info msg=&#34;Watchtower 1.7.1&#34;
</span></span><span class=line><span class=cl>time=&#34;2025-08-16T13:58:50Z&#34; level=info msg=&#34;Using no notifications&#34;
</span></span><span class=line><span class=cl>time=&#34;2025-08-16T13:58:50Z&#34; level=info msg=&#34;Checking all containers (except explicitly disabled with label)&#34;
</span></span><span class=line><span class=cl>time=&#34;2025-08-16T13:58:50Z&#34; level=info msg=&#34;Scheduling first run: 2025-08-17 04:00:00 +0000 UTC&#34;
</span></span><span class=line><span class=cl>time=&#34;2025-08-16T13:58:50Z&#34; level=info msg=&#34;Note that the first check will be performed in 14 hours, 1 minute, 9 seconds&#34;</span></span></code></pre></td></tr></table></div></div></div><h2 id=cadvisor-prometheus--grafana--influxdb id=cadvisor-prometheus--grafana--influxdb><span class=me-2>cAdvisor+ Prometheus + Grafana + InfluxDB</span>
<a href=#cadvisor-prometheus--grafana--influxdb class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><a href=/posts/Monitoring/#monitoring-docker-cadvisor-prometheus--grafana>Monitoring Docker (cAdvisor+ Prometheus + Grafana)</a></p><h2 id=linkwarden id=linkwarden><span class=me-2>Linkwarden</span>
<a href=#linkwarden class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><em>Linkwarden est un gestionnaire de liens open-source robuste et polyvalent, conçu pour aider les utilisateurs à organiser, sauvegarder et retrouver facilement leurs liens favoris.<br>Linkwarden a des exigences matérielles minimales - il a été testé sur un VPS avec 4Go de mémoire.</em></p><p>Lien <a href=https://docs.linkwarden.app>https://docs.linkwarden.app</a></p><h3 id=exigences id=exigences><span class=me-2>Exigences</span>
<a href=#exigences class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>Docker</li><li>Curl</li><li>Nano</li></ul><h3 id=installation id=installation><span class=me-2>Installation</span>
<a href=#installation class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>1 - Télécharger les fichiers requis</p><div class=code-block><div class=code-header><span data-label-text=Shell><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>mkdir linkwarden <span class=o>&amp;&amp;</span> <span class=nb>cd</span> linkwarden
</span></span><span class=line><span class=cl>curl -O https://raw.githubusercontent.com/linkwarden/linkwarden/refs/heads/main/docker-compose.yml
</span></span><span class=line><span class=cl>curl -L https://raw.githubusercontent.com/linkwarden/linkwarden/refs/heads/main/.env.sample -o <span class=s2>&#34;.env&#34;</span></span></span></code></pre></td></tr></table></div></div></div><p>2 - Configurer les variables d&rsquo;environnement</p><p>Les variables d&rsquo;environnement requises sont :</p><div class=code-block><div class=code-header><span data-label-text><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>NEXTAUTH_URL=http://localhost:3000/api/v1/auth
</span></span><span class=line><span class=cl>NEXTAUTH_SECRET=VERY_SENSITIVE_SECRET
</span></span><span class=line><span class=cl>MEILI_MASTER_KEY=VERY_SENSITIVE_MEILI_MASTER_KEY
</span></span><span class=line><span class=cl>POSTGRES_PASSWORD=CUSTOM_POSTGRES_PASSWORD</span></span></code></pre></td></tr></table></div></div></div><p>La seule chose que vous devez changer ici est <strong>NEXTAAUTH_SECRET</strong>, <strong>POSTGRES_PASSWORD</strong>, et <strong>MEILI_MASTER_KEY</strong>, ils devraient tous être des phrases secrètes différentes. La phrase doit être enveloppée en guillemets simples ou doubles si des caractères spéciaux sont utilisés.</p><p>La NEXTAUTH_URL ne doit être changée que si vous l&rsquo;hébergez ailleurs.</p><p>3 - Exécution</p><p>Dans le dossier principal (où vous avez créé le fichier .env), lancez simplement ce qui suit :</p><div class=code-block><div class=code-header><span data-label-text=Shell><i class="fas fa-code fa-fw small"></i></span> <button aria-label=copy data-title-succeed=Copied!><i class="far fa-clipboard"></i></button></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo docker-compose up</span></span></code></pre></td></tr></table></div></div></div><p>Après quelques minutes (selon votre connexion Internet), vous pouvez accéder à Linkwarden via <a href=http://192.168.10.215:3000>http://192.168.10.215:3000</a> (ou le nom d&rsquo;hôte sur lequel vous avez déployé Linkwarden).</p><p><a href=/post/2025-08-16-machine_virtuelle_vm-alpine05/Linkwarden01.png class="popup img-link"><img src=/post/2025-08-16-machine_virtuelle_vm-alpine05/Linkwarden01.png alt>
</a>{: .normal}</p><p>Après avoir créer un compte<br><a href=/post/2025-08-16-machine_virtuelle_vm-alpine05/Linkwarden02.png class="popup img-link"><img src=/post/2025-08-16-machine_virtuelle_vm-alpine05/Linkwarden02.png alt>
</a>{: .normal}</p><p><a href=https://jason19970210.medium.com/a-step-by-step-how-to-start-docker-compose-container-at-boot-effe9964e57f>A Step-by-Step Guide How to Start docker-compose Container at Boot</a><br><a href=/post/2025-08-16-machine_virtuelle_vm-alpine05/Linkwarden03.png class="popup img-link"><img src=/post/2025-08-16-machine_virtuelle_vm-alpine05/Linkwarden03.png alt>
</a>{: .normal}</p><h3 id=cwwk---linkwarden id=cwwk---linkwarden><span class=me-2>cwwk - linkwarden</span>
<a href=#cwwk---linkwarden class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>Domaines link.home.arpa et link.rnmkcy.eu</p><ul><li><a href=https://docs.linkwarden.app/getting-started/browser-extension>Extension firefox</a></li></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"><i class="far fa-folder-open fa-fw me-1"></i>
<a href=/categories/virtuel/>virtuel</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-5 pb-2"><div class=license-wrapper>This post is licensed under <a href=https://creativecommons.org/licenses/by/4.0/>CC BY 4.0</a> by the author.</div></div></div></article></main><aside aria-label=Panel id=panel-wrapper class="col-xl-3 ps-2 text-muted"><div class=access><section id=access-lastmod><h2 class=panel-heading>Recently Updated</h2><ul class="content list-unstyled ps-0 pb-1 ms-1 mt-2"><li class="text-truncate lh-lg"><a href=/post/2025-08-16-machine_virtuelle_vm-alpine05/>cwwk KVM vm-alpine05</a></li><li class="text-truncate lh-lg"><a href=/post/2019-08-11-customize-the-favicon/>Customize the Favicon</a></li><li class="text-truncate lh-lg"><a href=/post/2019-08-09-getting-started/>Getting Started</a></li><li class="text-truncate lh-lg"><a href=/post/2019-08-08-write-a-new-post/>Writing a New Post</a></li><li class="text-truncate lh-lg"><a href=/post/2019-08-08-text-and-typography/>Text and Typography</a></li></ul></section><section><h2 class=panel-heading>Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"><a class="post-tag btn btn-outline-primary" href=https://boproyan.github.io/tags/favicon/>favicon</a>
<a class="post-tag btn btn-outline-primary" href=https://boproyan.github.io/tags/getting-started/>getting started</a>
<a class="post-tag btn btn-outline-primary" href=https://boproyan.github.io/tags/typography/>typography</a>
<a class="post-tag btn btn-outline-primary" href=https://boproyan.github.io/tags/writing/>writing</a></div></section></div><div class="toc-border-cover z-3"></div><section id=toc-wrapper class="invisible position-sticky ps-0 pe-4 pb-4"><h2 class="panel-heading ps-3 pb-2 mb-0">Contents</h2><nav id=toc></nav></section></aside></div><div class=row><div id=tail-wrapper class="col-12 col-lg-11 col-xl-9 px-md-4"><nav class="post-navigation d-flex justify-content-between" aria-label="Post Navigation"><a href=/post/2019-08-11-customize-the-favicon/ class="btn btn-outline-primary" aria-label=Older><p>Customize the Favicon</p></a><div class="btn btn-outline-primary disabled" aria-label=Newer><p>-</p></div></nav><footer aria-label="Site Info" class="d-flex flex-column justify-content-center text-muted
flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3"><p>©
<time>2025</time>
<a href=https://github.com/geekifan>Yifan</a>.
<span data-bs-toggle=tooltip data-bs-placement=top title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p><p>Using the <a data-bs-toggle=tooltip data-bs-placement=top title=v1.0.2 href=https://github.com/geekifan/hugo-theme-chirpy target=_blank rel=noopener>Chirpy</a> theme for <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a>.</p></footer></div></div><div id=search-result-wrapper class="d-flex justify-content-center d-none"><div class="col-11 content"><div id=search-hints><section><h2 class=panel-heading>Trending Tags</h2><div class="d-flex flex-wrap mt-3 mb-1 me-3"><a class="post-tag btn btn-outline-primary" href=https://boproyan.github.io/tags/favicon/>favicon</a>
<a class="post-tag btn btn-outline-primary" href=https://boproyan.github.io/tags/getting-started/>getting started</a>
<a class="post-tag btn btn-outline-primary" href=https://boproyan.github.io/tags/typography/>typography</a>
<a class="post-tag btn btn-outline-primary" href=https://boproyan.github.io/tags/writing/>writing</a></div></section></div><div id=search-results class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div><script>const DEFAULT_CONFIG={search:{minChars:1,maxResults:5,fields:{title:!0,description:!0,section:!0,contents:!0},strictMode:!0}};class FastSearch{constructor({searchInput:e,resultsContainer:t,json:n,searchResultTemplate:s=null,noResultsText:o=null}){this.searchInput=e,this.resultsContainer=t,this.json=n,this.searchResultTemplate=s,this.noResultsText=o,this.init()}init(){this.loadSearchIndex(),this.searchInput.addEventListener("input",e=>{if(!this.searchIndex){this.resultsContainer.innerHTML='<li class="search-message">Loading search index...</li>';return}this.performSearch(this.searchInput.value)})}async loadSearchIndex(){try{const e=await fetch(this.json);if(!e.ok)throw new Error("Failed to load search index");const t=await e.json();this.searchIndex=t.map(e=>({...e,searchableTitle:e.title?.toLowerCase()||"",searchableDesc:e.desc?.toLowerCase()||"",searchableSection:e.section?.toLowerCase()||"",searchableContents:e.contents?.toLowerCase()||""}))}catch(e){console.error("Error loading search index:",e),this.resultsContainer.innerHTML='<li class="search-message">Error loading search index...</li>'}}escapeHtml(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):""}containsTerm(e,t){return!!e&&!!t&&e.includes(t)}performSearch(e){if(e=e.toLowerCase().trim(),!e||!this.searchIndex||e.length<DEFAULT_CONFIG.search.minChars){this.resultsContainer.innerHTML="";return}const s=[e,...e.split(/\s+/).filter(e=>e.length>0)],t=[...new Set(s)],o=DEFAULT_CONFIG.search.strictMode,n=this.searchIndex.map(e=>{const s=this.checkFieldsForMatch(e,t[0]);if(o&&!s)return{item:e,score:0,matched:!1};let n=0,i=0,a=!1;t.forEach((t,s)=>{const r=s===0,o=this.checkFieldsForMatch(e,t);o&&(i++,o.inTitle&&(n+=r?10:5,a=!0),o.inDesc&&(n+=r?8:4),o.inSection&&(n+=r?6:3),o.inContents&&(n+=r?4:2))});const r=i/t.length,c=n*r*(a?1.5:1);return{item:e,score:c,matched:s}}).filter(e=>e.matched).sort((e,t)=>t.score-e.score).slice(0,DEFAULT_CONFIG.search.maxResults).map(e=>e.item);if(n.length===0){this.resultsContainer.innerHTML='<p class="mt-5">Oops! No results found.</p>';return}const i=n.map(e=>{let t="",n="";return e.categories&&(t=e.categories.join(", "),t=`<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${t}</div>`),e.tags&&(n=e.tags.join(", "),n=`<div><i class="fa fa-tag fa-fw"></i>${n}</div>`),`
        <article class="px-1 px-sm-2 px-lg-4 px-xl-0">
          <header>
            <h2><a href="${this.escapeHtml(e.permalink)}">${this.escapeHtml(e.title)}</a></h2>
            <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">
              ${t}
              ${n}
            </div>
          </header>
          <p>${this.escapeHtml(e.contents)}</p>
        </article>
      `}).join("");this.resultsContainer.innerHTML=i}checkFieldsForMatch(e,t){const n={inTitle:!1,inDesc:!1,inSection:!1,inContents:!1};return DEFAULT_CONFIG.search.fields.title&&this.containsTerm(e.searchableTitle,t)&&(n.inTitle=!0),DEFAULT_CONFIG.search.fields.description&&this.containsTerm(e.searchableDesc,t)&&(n.inDesc=!0),DEFAULT_CONFIG.search.fields.section&&this.containsTerm(e.searchableSection,t)&&(n.inSection=!0),DEFAULT_CONFIG.search.fields.contents&&this.containsTerm(e.searchableContents,t)&&(n.inContents=!0),!!(n.inTitle||n.inDesc||n.inSection||n.inContents)&&n}}const search=new FastSearch({searchInput:document.getElementById("search-input"),resultsContainer:document.getElementById("search-results"),json:`/index.json`})</script></div><aside aria-label="Scroll to Top"><button id=back-to-top type=button class="btn btn-lg btn-box-shadow">
<i class="fas fa-angle-up"></i></button></aside></div><div id=mask class="d-none position-fixed w-100 h-100 z-1"></div></body></html>